"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _Theme=_interopRequireDefault(require("./Theme")),_env=_interopRequireDefault(require("./env")),_fsExtra=_interopRequireDefault(require("fs-extra"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var Config=/*#__PURE__*/function(){function a(){return _classCallCheck(this,a),this}return _createClass(a,[{key:"set",value:function set(a){// console.log(value)
// Get the input value for the config
var b;// Check if value is a path to a file or an object
if("string"==typeof a&&_fsExtra["default"].existsSync(process.cwd()+"/"+a)&&(b=require(process.cwd()+"/"+a)),"object"===_typeof(a)&&(b=a),b){var c={},d="";// Record the root of where the file is stored
a.match(/(.*)[\/\\]/)&&(d=a.match(/(.*)[\/\\]/)[1]+"/"),c.root=process.cwd()+"/"+d||"",c.path=process.cwd()+"/"+a,c=Object.assign(c,b)// For model, template and output we must put them into arrays
,["model","template","output"].forEach(function(a){c[a]&&(c[a]=putValuesIntoArray(c[a]))}),c=normaliseOutputs(c),c.theme&&_Theme["default"].set(c.theme,c),Object.assign(this,c)}}}]),a}();function normaliseOutputs(a){var b=a.output.map(function(b){if("undefined"==typeof b)throw new Error("No outputs specified in config");// Check for name
var c="undefined"==typeof b.file?Object.keys(b)[0]:null;// Check for model
var d=b.model?b.model:a.model?a.model:null;// Check for template
var e=b.template?b.template:a.template?a.template:null;// Check for directory
var f=b.dir?a.dir?a.root+a.dir+b.dir:a.root+b.dir:a.dir?a.root+a.dir:a.root+"";// Check for file
var g;return g="undefined"==typeof b.file?b[c].file:b.file,Object.assign({},{name:c,model:d,template:e,dir:f,file:g})});return a.output=b,a}function putValuesIntoArray(a){return Array.isArray(a)?a:[a]}var config=new Config;"test"===_env["default"]?config.set("src/stub/config.js"):config.set("mole.config.js");var _default=config;exports["default"]=_default,module.exports=exports.default;